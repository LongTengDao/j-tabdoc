/*!
 * 模块名称：jTabDoc
 * 模块功能：TabDoc 的官方标准实现。从属于“简计划”。
   　　　　　The official standard implementation of TabDoc. Belong to "Plan J".
 * 模块版本：2.0.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-tabdoc/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-tabdoc/
 */
(function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).jTabDoc=r()})(this,function(){"use strict";var x,r=Object.prototype.toString,v=Array.prototype.push,w=Array.isArray||function w(e){return"[object Array]"===r.call(e)};if("function"==typeof Buffer){var p=Buffer.isBuffer;if("function"==typeof p&&"function"==typeof Buffer.from)var n=Buffer.hasOwnProperty("from")?Buffer.from:function n(e){return new Buffer(e)},s=function s(e){switch(e[0]){case 239:if(187===e[1]&&191===e[2])return e.slice(3).toString("utf8");break;case 255:if(254===e[1])return e.slice(2).toString("ucs2");break;case 254:if(255===e[1])return(e=n(e)).swap16().slice(2).toString("ucs2")}return e.toString()};else p=function p(){return!1}}else p=function p(){return!1};var o,c=/^[1-9]\d*$/,y="".repeat?function y(e){return" ".repeat(e)}:(o=[],function(e){return o.length=e+1,o.join(" ")});function g(e){for(var r=e.length,n=0;n<r;++n)if("string"!=typeof e[n])return!0;return!1}var h=/^\uFEFF/,b=/\r\n?|\n/;function T(e,r,n,o,t,i,f,a){var u=[],l=r.length-1,p=0,s=0===r[0].length;e:for(;;){var c=p;if(s)if(o)for(;;){if(p===l){u.push(p+1-c);break e}if(0!==r[++p].length){u.push(p-c),s=!1;break}}else for(;;){if(p===l)break e;if(0!==r[++p].length){s=!1;break}}else for(;;){if(p===l){n(e,u,o,t,i,r,c,p,f,a);break e}if(0===r[++p].length){n(e,u,o,t,i,r,c,p-1,f,a),s=!0;break}}}return u.number=f,null===i?u:i(u,e)}function j(e,r,n,o,t,i,f,a,u,l){var p,s,c;e:for(var h=f,y=i[h],b=y.indexOf("\t");;){if(s=[],c=u+h,-1===b)for(p="",s.push(y);;){if(h===a)break e;if(-1!==(b=(y=i[++h]).indexOf("\t")))break;s.push(y)}else{for(0===b?(p="\t",s.push(y.slice(1))):(p=y.slice(0,b+1),s.push(y.slice(b+1)));;){if(h===a){null===o&&(s=T(e,s,j,n,null,t,c,l));break e}if(0!==(b=(y=i[++h]).indexOf("\t")))break;s.push(y.slice(1))}null===o&&(s=T(e,s,j,n,null,t,c,l))}r.push({key:p,value:s,number:c})}r.push({key:p,value:s,number:c})}function D(e,r,n,o,t,i,f,a,u,l){var p,s,c,h=[],y="";e:for(var b=f,v=i[b],w=v.indexOf("\t");;){if(s=[],c=u+b,-1===w)for(p="",s.push(v),y+="\n";;){if(b===a)break e;if(-1!==(w=(v=i[++b]).indexOf("\t")))break;s.push(v)}else for(0===w?(p="\t",s.push(v.slice(1)),y+="\t\n"):(y+=(p=v.slice(0,w+1))+"\n",s.push(v.slice(w+1)));;){if(b===a)break e;if(0!==(w=(v=i[++b]).indexOf("\t")))break;s.push(v.slice(1))}h.push({key:p,value:s,number:c})}if(h.push({key:p,value:s,number:c}),!0===o)return r.push(1===h.length?h[0]:h),void 0;for(var g=o.length,T=0;T<g;++T){var j=o[T],D=j[0].exec(y);if(null!==D){if(l){if(D===x)throw new Error("jTabDoc.parse(,reviver.group[*][0].exec())");if(D.index)throw new Error("jTabDoc.parse(,reviver.group[*][0].exec().index)");if("string"!=typeof D[0])throw new TypeError("jTabDoc.parse(,reviver.group[*][0].exec()[0])");if(0===D[0].length)throw new Error("jTabDoc.parse(,reviver.group[*][0].exec()[0].length)");if("\n"!==D[0].charAt(D[0].length-1))throw new Error("jTabDoc.parse(,reviver.group[*][0].exec()[0])")}var E=D[0],d=E.length;if(y.length===d){if(r.push(j[1](1===h.length?h[0]:h,e)),l&&r[r.length-1]===x)throw new TypeError("jTabDoc.parse(,reviver.group[*][1]())");return}for(var k=1,m=E.indexOf("\n");!((m=E.indexOf("\n",m+1))<0);++k);if(r.push(j[1](1===k?h.shift():h.splice(0,k),e)),l&&r[r.length-1]===x)throw new TypeError("jTabDoc.parse(,reviver.group[*][1]())");T=0,y=y.slice(d)}}throw new Error("jTabDoc.parse(,reviver.group[!])")}function E(e,r,n,o){var t=o.length;if(0===t)e.push(r);else{e.push(r+o[0]);for(var i=1;i<t;++i)e.push(n+o[i])}}function d(e,r){if("object"==typeof e&&null!==e){if(!("key"in e&&"value"in e))throw new Error("jTabDoc.stringify("+(r?",replacer()":"level")+"[*]:object)");if("string"!=typeof e.key||!/^(?:[^\t\n\r]*\t)?$/.test(e.key))throw new Error("jTabDoc.stringify("+(r?",replacer()":"level")+"[*]:object.key)");if(null!==r||""===e.key){if(!w(e.value))throw new TypeError("jTabDoc.stringify("+(r?",replacer()":"level")+"[*]:object.value)");if(g(e.value))throw new TypeError("jTabDoc.stringify("+(r?",replacer()":"level")+"[*]:object.value[*])")}}else{if("number"!=typeof e)throw new TypeError("jTabDoc.stringify("+(r?",replacer()":"level")+"[*])");if(!/^\d+$/.test(e))throw new Error("jTabDoc.stringify("+(r?",replacer()":"level")+"[*]:number)")}}var e={parse:function k(e,r,n,o){if(w(e)||("string"==typeof e?e=e.replace(h,"").split(b):p(e)&&(e=s(e).split(b))),null==r)var t=!0,i=null,f=null;else t=r.empty,i=r.group,f=r.level,t===x&&(t=!0),i===x&&(i=null),f===x&&(f=null);if(n===x&&(n=1),!1!==o){if(4<arguments.length)throw new Error("jTabDoc.parse(tabLines, reviver, number, debug, ...)");if(o===x)o=!0;else if(!0!==o)throw new TypeError("jTabDoc.stringify(,,,debug)");if(!w(e))throw new TypeError("jTabDoc.parse(tabLines)");if(g(e))throw new TypeError("jTabDoc.parse(tabLines[*])");if("boolean"!=typeof t)throw new TypeError("jTabDoc.parse(,reviver.empty)");if(null!==i&&"boolean"!=typeof i){if(!w(i))throw new TypeError("jTabDoc.parse(,reviver.group)");for(var a=i.length,u=0;u<a;++u){var l=i[u];if(!w(l))throw new TypeError("jTabDoc.parse(,reviver.group[*])");if(!l[0]||"function"!=typeof l[0].exec)throw new TypeError("jTabDoc.parse(,reviver.group[*][0])");if("function"!=typeof l[1])throw new TypeError("jTabDoc.parse(,reviver.group[*][1])")}}if(null!==f&&"function"!=typeof f)throw new TypeError("jTabDoc.parse(,reviver.level)");if("number"!=typeof n)throw new TypeError("jTabDoc.parse(,,number)");if(!c.test(n))throw new RangeError("jTabDoc.parse(,,number)")}return 0===e.length?null===f?[]:f([],this):T(this,e,i?D:j,t,i,f,n,o)},stringify:function t(e,r,n,o){if(!1!==o){if(4<arguments.length)throw new Error("jTabDoc.stringify(level, replacer, space, debug, ...)");if(o===x)o=!0;else if(!0!==o)throw new TypeError("jTabDoc.stringify(,,,debug)");if(null!=r&&"function"!=typeof r)throw new TypeError("jTabDoc.stringify(,replacer)");if(null!=n&&"function"!=typeof n)throw new TypeError("jTabDoc.stringify(,,space)")}return r===x&&(r=null),n===x&&(n=null),function b(e,r,n,o,t){if(null!==n&&(r=n(r,e)),t&&!w(r))throw new TypeError("jTabDoc.stringify(level)");for(var i=[],f=r.length,a=0;a<f;++a){var u=r[a];if(t&&d(u,n),"number"==typeof u)for(;u--;)i.push("");else if(""===u.key)v.apply(i,u.value);else if(null===o)E(i,u.key,"\t",null===n?b(e,u.value,null,o,t):u.value);else{for(var l=[u.key],p=[u.value];++a<f;){if(u=r[a],t&&d(u,n),"number"==typeof u){--a;break}l.push(u.key),p.push(u.value)}var s=o(l,e);if(t){if("object"!=typeof s||null===s)throw new TypeError("jTabDoc.stringify(,,space())");if(!("keys"in s&&"indent"in s))throw new Error("jTabDoc.stringify(,,space())");if(!w(s.keys))throw new TypeError("jTabDoc.stringify(,,space().keys)");if(s.keys.length!==p.length)throw new Error("jTabDoc.stringify(,,space().keys.length)");if(g(s.keys))throw new TypeError("jTabDoc.stringify(,,space().keys[*])");if("string"!=typeof s.indent)throw new TypeError("jTabDoc.stringify(,,space().indent)")}l=s.keys;for(var c=s.indent,h=p.length,y=0;y<h;++y)""===l[y]?v.apply(i,p[y]):E(i,l[y],c,null===n?b(e,p[y],null,o,t):p[y])}}return i}(this,e,r,n,o)},Space:function i(r,n){if("number"!=typeof r)throw new TypeError("jTabDoc.Space(minWidth)");if("number"!=typeof n)throw new TypeError("jTabDoc.Space(,padding)");var o=r<0;if(o&&(r=~r),!c.test(r))throw new RangeError("jTabDoc.Space(minWidth)");if(!c.test(n))throw new RangeError("jTabDoc.Space(,padding)");return function(e){return function h(e,r,n,o){for(var t=1,i=[],f=o.length,a=0;a<f;++a){var u=0,l=o[a];if(""!==l){for(var p=l.length-1,s=0;s<p;++s){var c=l.charCodeAt(s);c<128?u+=1:(u+=2,55296<=c&&c<=56319&&s+1<p&&56320<=(c=l.charCodeAt(s+1))&&c<=57343&&++s)}t<u&&(t=u)}i.push(u)}for(u=t+n,e?u%r&&(u+=r-u%r):u<r&&(u=r),a=0;a<f;++a)""!==(l=o[a])&&(o[a]=l.slice(0,-1)+y(u-i[a]));return{keys:o,indent:y(u)}}(o,r,n,e)}},version:"2.0.0"};return e["default"]=e});
//# sourceMappingURL=j-tabdoc.min.js.map